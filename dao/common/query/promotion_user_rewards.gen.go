// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.

package query

import (
	"context"
	"database/sql"

	"gorm.io/gorm"
	"gorm.io/gorm/clause"
	"gorm.io/gorm/schema"

	"gorm.io/gen"
	"gorm.io/gen/field"

	"gorm.io/plugin/dbresolver"

	"github.com/davy66666/rpc_common/dao/model"
)

func newPromotionUserReward(db *gorm.DB, opts ...gen.DOOption) promotionUserReward {
	_promotionUserReward := promotionUserReward{}

	_promotionUserReward.promotionUserRewardDo.UseDB(db, opts...)
	_promotionUserReward.promotionUserRewardDo.UseModel(&model.PromotionUserReward{})

	tableName := _promotionUserReward.promotionUserRewardDo.TableName()
	_promotionUserReward.ALL = field.NewAsterisk(tableName)
	_promotionUserReward.ID = field.NewInt64(tableName, "id")
	_promotionUserReward.PromotionID = field.NewInt64(tableName, "promotion_id")
	_promotionUserReward.StartDate = field.NewTime(tableName, "start_date")
	_promotionUserReward.EndDate = field.NewTime(tableName, "end_date")
	_promotionUserReward.UserID = field.NewInt64(tableName, "user_id")
	_promotionUserReward.Username = field.NewString(tableName, "username")
	_promotionUserReward.ParentID = field.NewInt64(tableName, "parent_id")
	_promotionUserReward.ForefatherIds = field.NewString(tableName, "forefather_ids")
	_promotionUserReward.Config = field.NewString(tableName, "config")
	_promotionUserReward.CalData = field.NewString(tableName, "cal_data")
	_promotionUserReward.AuditedAt = field.NewField(tableName, "audited_at")
	_promotionUserReward.AuditedAdminName = field.NewString(tableName, "audited_admin_name")
	_promotionUserReward.ClaimedAt = field.NewField(tableName, "claimed_at")
	_promotionUserReward.SentAt = field.NewField(tableName, "sent_at")
	_promotionUserReward.Prize = field.NewFloat64(tableName, "prize")
	_promotionUserReward.IsCal = field.NewInt64(tableName, "is_cal")
	_promotionUserReward.Status = field.NewInt64(tableName, "status")
	_promotionUserReward.CreatedAt = field.NewField(tableName, "created_at")
	_promotionUserReward.UpdatedAt = field.NewField(tableName, "updated_at")
	_promotionUserReward.Type = field.NewInt64(tableName, "type")
	_promotionUserReward.SubType = field.NewInt64(tableName, "sub_type")
	_promotionUserReward.RealName = field.NewString(tableName, "real_name")
	_promotionUserReward.SendScheme = field.NewString(tableName, "send_scheme")
	_promotionUserReward.IsEnter = field.NewInt64(tableName, "is_enter")
	_promotionUserReward.ClaimExpireDate = field.NewTime(tableName, "claim_expire_date")
	_promotionUserReward.ExcludeSubType = field.NewString(tableName, "exclude_sub_type")
	_promotionUserReward.Remark = field.NewString(tableName, "remark")
	_promotionUserReward.RiskStatus = field.NewInt64(tableName, "risk_status")
	_promotionUserReward.RiskAt = field.NewField(tableName, "risk_at")
	_promotionUserReward.RiskIsPass = field.NewInt64(tableName, "risk_is_pass")
	_promotionUserReward.RiskRemark = field.NewString(tableName, "risk_remark")
	_promotionUserReward.IsEnterJob = field.NewInt64(tableName, "is_enter_job")
	_promotionUserReward.PayLevel = field.NewInt64(tableName, "pay_level")
	_promotionUserReward.Level = field.NewInt64(tableName, "level")
	_promotionUserReward.IsHistory = field.NewInt64(tableName, "is_history")

	_promotionUserReward.fillFieldMap()

	return _promotionUserReward
}

type promotionUserReward struct {
	promotionUserRewardDo promotionUserRewardDo

	ALL              field.Asterisk
	ID               field.Int64
	PromotionID      field.Int64   // 优惠id
	StartDate        field.Time    // 周期开始时间
	EndDate          field.Time    // 周期结束时间
	UserID           field.Int64   // 会员id
	Username         field.String  // 会员名称
	ParentID         field.Int64   // 上级id
	ForefatherIds    field.String  // 代理树
	Config           field.String  // 计算时的条件记录，方便查询
	CalData          field.String  // 计算数据
	AuditedAt        field.Field   // 审核时间
	AuditedAdminName field.String  // 审核管理员
	ClaimedAt        field.Field   // 领取时间
	SentAt           field.Field   // 派发时间
	Prize            field.Float64 // 奖励
	IsCal            field.Int64   // 是否计算 0：未计算 1：已计算
	Status           field.Int64   // 状态 1:待审核 2:待领取 3:待派发 4:成功 5:拒绝
	CreatedAt        field.Field
	UpdatedAt        field.Field
	Type             field.Int64  // 优惠大类
	SubType          field.Int64  // 优惠小类
	RealName         field.String // 会员真实姓名
	SendScheme       field.String // 派发计划
	IsEnter          field.Int64  // 是否是报名 1:是 0:否
	ClaimExpireDate  field.Time   // 领取的有效期
	ExcludeSubType   field.String // 排除活动类型
	Remark           field.String // 审核备注
	RiskStatus       field.Int64  // 风控状态 1：未进行 2：进行中 3：成功 4：失败
	RiskAt           field.Field  // 风控时间
	RiskIsPass       field.Int64  // 风控是否通过 0：不通过 1：通过
	RiskRemark       field.String // 风控备注
	IsEnterJob       field.Int64  // 是否进入队列 0:未进去 1:进入
	PayLevel         field.Int64  // 支付层级
	Level            field.Int64  // 奖励等级
	IsHistory        field.Int64  // 是否历史数据

	fieldMap map[string]field.Expr
}

func (p promotionUserReward) Table(newTableName string) *promotionUserReward {
	p.promotionUserRewardDo.UseTable(newTableName)
	return p.updateTableName(newTableName)
}

func (p promotionUserReward) As(alias string) *promotionUserReward {
	p.promotionUserRewardDo.DO = *(p.promotionUserRewardDo.As(alias).(*gen.DO))
	return p.updateTableName(alias)
}

func (p *promotionUserReward) updateTableName(table string) *promotionUserReward {
	p.ALL = field.NewAsterisk(table)
	p.ID = field.NewInt64(table, "id")
	p.PromotionID = field.NewInt64(table, "promotion_id")
	p.StartDate = field.NewTime(table, "start_date")
	p.EndDate = field.NewTime(table, "end_date")
	p.UserID = field.NewInt64(table, "user_id")
	p.Username = field.NewString(table, "username")
	p.ParentID = field.NewInt64(table, "parent_id")
	p.ForefatherIds = field.NewString(table, "forefather_ids")
	p.Config = field.NewString(table, "config")
	p.CalData = field.NewString(table, "cal_data")
	p.AuditedAt = field.NewField(table, "audited_at")
	p.AuditedAdminName = field.NewString(table, "audited_admin_name")
	p.ClaimedAt = field.NewField(table, "claimed_at")
	p.SentAt = field.NewField(table, "sent_at")
	p.Prize = field.NewFloat64(table, "prize")
	p.IsCal = field.NewInt64(table, "is_cal")
	p.Status = field.NewInt64(table, "status")
	p.CreatedAt = field.NewField(table, "created_at")
	p.UpdatedAt = field.NewField(table, "updated_at")
	p.Type = field.NewInt64(table, "type")
	p.SubType = field.NewInt64(table, "sub_type")
	p.RealName = field.NewString(table, "real_name")
	p.SendScheme = field.NewString(table, "send_scheme")
	p.IsEnter = field.NewInt64(table, "is_enter")
	p.ClaimExpireDate = field.NewTime(table, "claim_expire_date")
	p.ExcludeSubType = field.NewString(table, "exclude_sub_type")
	p.Remark = field.NewString(table, "remark")
	p.RiskStatus = field.NewInt64(table, "risk_status")
	p.RiskAt = field.NewField(table, "risk_at")
	p.RiskIsPass = field.NewInt64(table, "risk_is_pass")
	p.RiskRemark = field.NewString(table, "risk_remark")
	p.IsEnterJob = field.NewInt64(table, "is_enter_job")
	p.PayLevel = field.NewInt64(table, "pay_level")
	p.Level = field.NewInt64(table, "level")
	p.IsHistory = field.NewInt64(table, "is_history")

	p.fillFieldMap()

	return p
}

func (p *promotionUserReward) WithContext(ctx context.Context) IPromotionUserRewardDo {
	return p.promotionUserRewardDo.WithContext(ctx)
}

func (p promotionUserReward) TableName() string { return p.promotionUserRewardDo.TableName() }

func (p promotionUserReward) Alias() string { return p.promotionUserRewardDo.Alias() }

func (p promotionUserReward) Columns(cols ...field.Expr) gen.Columns {
	return p.promotionUserRewardDo.Columns(cols...)
}

func (p *promotionUserReward) GetFieldByName(fieldName string) (field.OrderExpr, bool) {
	_f, ok := p.fieldMap[fieldName]
	if !ok || _f == nil {
		return nil, false
	}
	_oe, ok := _f.(field.OrderExpr)
	return _oe, ok
}

func (p *promotionUserReward) fillFieldMap() {
	p.fieldMap = make(map[string]field.Expr, 35)
	p.fieldMap["id"] = p.ID
	p.fieldMap["promotion_id"] = p.PromotionID
	p.fieldMap["start_date"] = p.StartDate
	p.fieldMap["end_date"] = p.EndDate
	p.fieldMap["user_id"] = p.UserID
	p.fieldMap["username"] = p.Username
	p.fieldMap["parent_id"] = p.ParentID
	p.fieldMap["forefather_ids"] = p.ForefatherIds
	p.fieldMap["config"] = p.Config
	p.fieldMap["cal_data"] = p.CalData
	p.fieldMap["audited_at"] = p.AuditedAt
	p.fieldMap["audited_admin_name"] = p.AuditedAdminName
	p.fieldMap["claimed_at"] = p.ClaimedAt
	p.fieldMap["sent_at"] = p.SentAt
	p.fieldMap["prize"] = p.Prize
	p.fieldMap["is_cal"] = p.IsCal
	p.fieldMap["status"] = p.Status
	p.fieldMap["created_at"] = p.CreatedAt
	p.fieldMap["updated_at"] = p.UpdatedAt
	p.fieldMap["type"] = p.Type
	p.fieldMap["sub_type"] = p.SubType
	p.fieldMap["real_name"] = p.RealName
	p.fieldMap["send_scheme"] = p.SendScheme
	p.fieldMap["is_enter"] = p.IsEnter
	p.fieldMap["claim_expire_date"] = p.ClaimExpireDate
	p.fieldMap["exclude_sub_type"] = p.ExcludeSubType
	p.fieldMap["remark"] = p.Remark
	p.fieldMap["risk_status"] = p.RiskStatus
	p.fieldMap["risk_at"] = p.RiskAt
	p.fieldMap["risk_is_pass"] = p.RiskIsPass
	p.fieldMap["risk_remark"] = p.RiskRemark
	p.fieldMap["is_enter_job"] = p.IsEnterJob
	p.fieldMap["pay_level"] = p.PayLevel
	p.fieldMap["level"] = p.Level
	p.fieldMap["is_history"] = p.IsHistory
}

func (p promotionUserReward) clone(db *gorm.DB) promotionUserReward {
	p.promotionUserRewardDo.ReplaceConnPool(db.Statement.ConnPool)
	return p
}

func (p promotionUserReward) replaceDB(db *gorm.DB) promotionUserReward {
	p.promotionUserRewardDo.ReplaceDB(db)
	return p
}

type promotionUserRewardDo struct{ gen.DO }

type IPromotionUserRewardDo interface {
	gen.SubQuery
	Debug() IPromotionUserRewardDo
	WithContext(ctx context.Context) IPromotionUserRewardDo
	WithResult(fc func(tx gen.Dao)) gen.ResultInfo
	ReplaceDB(db *gorm.DB)
	ReadDB() IPromotionUserRewardDo
	WriteDB() IPromotionUserRewardDo
	As(alias string) gen.Dao
	Session(config *gorm.Session) IPromotionUserRewardDo
	Columns(cols ...field.Expr) gen.Columns
	Clauses(conds ...clause.Expression) IPromotionUserRewardDo
	Not(conds ...gen.Condition) IPromotionUserRewardDo
	Or(conds ...gen.Condition) IPromotionUserRewardDo
	Select(conds ...field.Expr) IPromotionUserRewardDo
	Where(conds ...gen.Condition) IPromotionUserRewardDo
	Order(conds ...field.Expr) IPromotionUserRewardDo
	Distinct(cols ...field.Expr) IPromotionUserRewardDo
	Omit(cols ...field.Expr) IPromotionUserRewardDo
	Join(table schema.Tabler, on ...field.Expr) IPromotionUserRewardDo
	LeftJoin(table schema.Tabler, on ...field.Expr) IPromotionUserRewardDo
	RightJoin(table schema.Tabler, on ...field.Expr) IPromotionUserRewardDo
	Group(cols ...field.Expr) IPromotionUserRewardDo
	Having(conds ...gen.Condition) IPromotionUserRewardDo
	Limit(limit int) IPromotionUserRewardDo
	Offset(offset int) IPromotionUserRewardDo
	Count() (count int64, err error)
	Scopes(funcs ...func(gen.Dao) gen.Dao) IPromotionUserRewardDo
	Unscoped() IPromotionUserRewardDo
	Create(values ...*model.PromotionUserReward) error
	CreateInBatches(values []*model.PromotionUserReward, batchSize int) error
	Save(values ...*model.PromotionUserReward) error
	First() (*model.PromotionUserReward, error)
	Take() (*model.PromotionUserReward, error)
	Last() (*model.PromotionUserReward, error)
	Find() ([]*model.PromotionUserReward, error)
	FindInBatch(batchSize int, fc func(tx gen.Dao, batch int) error) (results []*model.PromotionUserReward, err error)
	FindInBatches(result *[]*model.PromotionUserReward, batchSize int, fc func(tx gen.Dao, batch int) error) error
	Pluck(column field.Expr, dest interface{}) error
	Delete(...*model.PromotionUserReward) (info gen.ResultInfo, err error)
	Update(column field.Expr, value interface{}) (info gen.ResultInfo, err error)
	UpdateSimple(columns ...field.AssignExpr) (info gen.ResultInfo, err error)
	Updates(value interface{}) (info gen.ResultInfo, err error)
	UpdateColumn(column field.Expr, value interface{}) (info gen.ResultInfo, err error)
	UpdateColumnSimple(columns ...field.AssignExpr) (info gen.ResultInfo, err error)
	UpdateColumns(value interface{}) (info gen.ResultInfo, err error)
	UpdateFrom(q gen.SubQuery) gen.Dao
	Attrs(attrs ...field.AssignExpr) IPromotionUserRewardDo
	Assign(attrs ...field.AssignExpr) IPromotionUserRewardDo
	Joins(fields ...field.RelationField) IPromotionUserRewardDo
	Preload(fields ...field.RelationField) IPromotionUserRewardDo
	FirstOrInit() (*model.PromotionUserReward, error)
	FirstOrCreate() (*model.PromotionUserReward, error)
	FindByPage(offset int, limit int) (result []*model.PromotionUserReward, count int64, err error)
	ScanByPage(result interface{}, offset int, limit int) (count int64, err error)
	Rows() (*sql.Rows, error)
	Row() *sql.Row
	Scan(result interface{}) (err error)
	Returning(value interface{}, columns ...string) IPromotionUserRewardDo
	UnderlyingDB() *gorm.DB
	schema.Tabler
}

func (p promotionUserRewardDo) Debug() IPromotionUserRewardDo {
	return p.withDO(p.DO.Debug())
}

func (p promotionUserRewardDo) WithContext(ctx context.Context) IPromotionUserRewardDo {
	return p.withDO(p.DO.WithContext(ctx))
}

func (p promotionUserRewardDo) ReadDB() IPromotionUserRewardDo {
	return p.Clauses(dbresolver.Read)
}

func (p promotionUserRewardDo) WriteDB() IPromotionUserRewardDo {
	return p.Clauses(dbresolver.Write)
}

func (p promotionUserRewardDo) Session(config *gorm.Session) IPromotionUserRewardDo {
	return p.withDO(p.DO.Session(config))
}

func (p promotionUserRewardDo) Clauses(conds ...clause.Expression) IPromotionUserRewardDo {
	return p.withDO(p.DO.Clauses(conds...))
}

func (p promotionUserRewardDo) Returning(value interface{}, columns ...string) IPromotionUserRewardDo {
	return p.withDO(p.DO.Returning(value, columns...))
}

func (p promotionUserRewardDo) Not(conds ...gen.Condition) IPromotionUserRewardDo {
	return p.withDO(p.DO.Not(conds...))
}

func (p promotionUserRewardDo) Or(conds ...gen.Condition) IPromotionUserRewardDo {
	return p.withDO(p.DO.Or(conds...))
}

func (p promotionUserRewardDo) Select(conds ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Select(conds...))
}

func (p promotionUserRewardDo) Where(conds ...gen.Condition) IPromotionUserRewardDo {
	return p.withDO(p.DO.Where(conds...))
}

func (p promotionUserRewardDo) Order(conds ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Order(conds...))
}

func (p promotionUserRewardDo) Distinct(cols ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Distinct(cols...))
}

func (p promotionUserRewardDo) Omit(cols ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Omit(cols...))
}

func (p promotionUserRewardDo) Join(table schema.Tabler, on ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Join(table, on...))
}

func (p promotionUserRewardDo) LeftJoin(table schema.Tabler, on ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.LeftJoin(table, on...))
}

func (p promotionUserRewardDo) RightJoin(table schema.Tabler, on ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.RightJoin(table, on...))
}

func (p promotionUserRewardDo) Group(cols ...field.Expr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Group(cols...))
}

func (p promotionUserRewardDo) Having(conds ...gen.Condition) IPromotionUserRewardDo {
	return p.withDO(p.DO.Having(conds...))
}

func (p promotionUserRewardDo) Limit(limit int) IPromotionUserRewardDo {
	return p.withDO(p.DO.Limit(limit))
}

func (p promotionUserRewardDo) Offset(offset int) IPromotionUserRewardDo {
	return p.withDO(p.DO.Offset(offset))
}

func (p promotionUserRewardDo) Scopes(funcs ...func(gen.Dao) gen.Dao) IPromotionUserRewardDo {
	return p.withDO(p.DO.Scopes(funcs...))
}

func (p promotionUserRewardDo) Unscoped() IPromotionUserRewardDo {
	return p.withDO(p.DO.Unscoped())
}

func (p promotionUserRewardDo) Create(values ...*model.PromotionUserReward) error {
	if len(values) == 0 {
		return nil
	}
	return p.DO.Create(values)
}

func (p promotionUserRewardDo) CreateInBatches(values []*model.PromotionUserReward, batchSize int) error {
	return p.DO.CreateInBatches(values, batchSize)
}

// Save : !!! underlying implementation is different with GORM
// The method is equivalent to executing the statement: db.Clauses(clause.OnConflict{UpdateAll: true}).Create(values)
func (p promotionUserRewardDo) Save(values ...*model.PromotionUserReward) error {
	if len(values) == 0 {
		return nil
	}
	return p.DO.Save(values)
}

func (p promotionUserRewardDo) First() (*model.PromotionUserReward, error) {
	if result, err := p.DO.First(); err != nil {
		return nil, err
	} else {
		return result.(*model.PromotionUserReward), nil
	}
}

func (p promotionUserRewardDo) Take() (*model.PromotionUserReward, error) {
	if result, err := p.DO.Take(); err != nil {
		return nil, err
	} else {
		return result.(*model.PromotionUserReward), nil
	}
}

func (p promotionUserRewardDo) Last() (*model.PromotionUserReward, error) {
	if result, err := p.DO.Last(); err != nil {
		return nil, err
	} else {
		return result.(*model.PromotionUserReward), nil
	}
}

func (p promotionUserRewardDo) Find() ([]*model.PromotionUserReward, error) {
	result, err := p.DO.Find()
	return result.([]*model.PromotionUserReward), err
}

func (p promotionUserRewardDo) FindInBatch(batchSize int, fc func(tx gen.Dao, batch int) error) (results []*model.PromotionUserReward, err error) {
	buf := make([]*model.PromotionUserReward, 0, batchSize)
	err = p.DO.FindInBatches(&buf, batchSize, func(tx gen.Dao, batch int) error {
		defer func() { results = append(results, buf...) }()
		return fc(tx, batch)
	})
	return results, err
}

func (p promotionUserRewardDo) FindInBatches(result *[]*model.PromotionUserReward, batchSize int, fc func(tx gen.Dao, batch int) error) error {
	return p.DO.FindInBatches(result, batchSize, fc)
}

func (p promotionUserRewardDo) Attrs(attrs ...field.AssignExpr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Attrs(attrs...))
}

func (p promotionUserRewardDo) Assign(attrs ...field.AssignExpr) IPromotionUserRewardDo {
	return p.withDO(p.DO.Assign(attrs...))
}

func (p promotionUserRewardDo) Joins(fields ...field.RelationField) IPromotionUserRewardDo {
	for _, _f := range fields {
		p = *p.withDO(p.DO.Joins(_f))
	}
	return &p
}

func (p promotionUserRewardDo) Preload(fields ...field.RelationField) IPromotionUserRewardDo {
	for _, _f := range fields {
		p = *p.withDO(p.DO.Preload(_f))
	}
	return &p
}

func (p promotionUserRewardDo) FirstOrInit() (*model.PromotionUserReward, error) {
	if result, err := p.DO.FirstOrInit(); err != nil {
		return nil, err
	} else {
		return result.(*model.PromotionUserReward), nil
	}
}

func (p promotionUserRewardDo) FirstOrCreate() (*model.PromotionUserReward, error) {
	if result, err := p.DO.FirstOrCreate(); err != nil {
		return nil, err
	} else {
		return result.(*model.PromotionUserReward), nil
	}
}

func (p promotionUserRewardDo) FindByPage(offset int, limit int) (result []*model.PromotionUserReward, count int64, err error) {
	result, err = p.Offset(offset).Limit(limit).Find()
	if err != nil {
		return
	}

	if size := len(result); 0 < limit && 0 < size && size < limit {
		count = int64(size + offset)
		return
	}

	count, err = p.Offset(-1).Limit(-1).Count()
	return
}

func (p promotionUserRewardDo) ScanByPage(result interface{}, offset int, limit int) (count int64, err error) {
	count, err = p.Count()
	if err != nil {
		return
	}

	err = p.Offset(offset).Limit(limit).Scan(result)
	return
}

func (p promotionUserRewardDo) Scan(result interface{}) (err error) {
	return p.DO.Scan(result)
}

func (p promotionUserRewardDo) Delete(models ...*model.PromotionUserReward) (result gen.ResultInfo, err error) {
	return p.DO.Delete(models)
}

func (p *promotionUserRewardDo) withDO(do gen.Dao) *promotionUserRewardDo {
	p.DO = *do.(*gen.DO)
	return p
}
